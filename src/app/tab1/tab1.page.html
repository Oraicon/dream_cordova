<ion-header class="ion-no-border">
  <ion-toolbar class="background_color">
    <ion-grid fixed>
      <ion-row class="ion-align-items-center">
        <ion-col size="6" class="ion-align-items-center text_header bold putih">Beranda</ion-col>
        <ion-col size="6" class="ion-text-end">
          <ion-button (click)="keluar()" fill="clear" class="padding_button">
            <ion-icon name="exit-outline" size="large" class="putih"></ion-icon>
          </ion-button>
        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-toolbar>
</ion-header>

<ion-content class="background_konten">

  <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>

  <ion-grid fixed class="ion-no-padding" *ngIf="data_beranda_loading_tidak_ada; else data_beranda_loading">
    <!-- data beranda -->
    <ion-row class="ion-padding-top background_color_biru_gelap" *ngIf="data_beranda;else data_beranda_tidak_ada">
      <ion-col size="12" class="" *ngFor="let data of data_header; let i = index">
        <ion-card class="bayangan">
          <ion-card-header>
            <ion-card-title class="ion-text-center text_judul">{{  data.nama_proyek }}</ion-card-title>
          </ion-card-header>
          <ion-card-content class="ion-no-padding">
            <ion-grid fixed class="ion-no-padding">
              <ion-row>
                <ion-col size="12">
                  <ion-list>
                    <ion-item>
                      <ion-label class="text_konten">Regional :</ion-label>
                      <ion-label class="ion-text-end text_konten">{{  data.nama_regional }}</ion-label>
                    </ion-item>
                    <ion-item>
                      <ion-label class="text_konten">LOP :</ion-label>
                      <ion-label class="ion-text-end text_konten">{{  data.lop }}</ion-label>
                    </ion-item>
                    <ion-item>
                      <ion-label class="text_konten">Supervisi :</ion-label>
                      <ion-label class="ion-text-end text_konten ion-text-wrap">{{  data.nama_supervisi }}</ion-label>
                    </ion-item>
                    <ion-item>
                      <ion-label class="text_konten">Mandor :</ion-label>
                      <ion-label class="ion-text-end text_konten ion-text-wrap">{{  data.nama_mandor }}</ion-label>
                    </ion-item>
                    <ion-item>
                      <ion-label class="text_konten">Deadline Proyek :</ion-label>
                      <ion-label class="ion-text-end text_konten">{{  tanggal_deadline[data.id] }}</ion-label>
                    </ion-item>
                  </ion-list>
                </ion-col>
              </ion-row>

              <div *ngIf="data_masih_proses[data.id] != 0; then data_ada; else data_tidak_ada "></div>

              <ng-template #data_tidak_ada>

                <div *ngIf="data_sudah_komplit[data.id] != 0; then kegiatan_ada; else tidak_ada_kegiatan"></div>

                <ng-template #tidak_ada_kegiatan>
                  <ion-row>
                    <ion-col size="12">
                      <ion-card color="medium" class="bayangan">
                        <ion-card-content>
                          <ion-grid fixed class="ion-no-padding">
                            <ion-row class="ion-text-center">
                              <ion-col size="12" class="putih">
                                <h2 class="bold">Kegiatan</h2>
                                  <h1 class="text_konten_banyak">Tidak ada</h1>
                                  <h3>Belum ada kegiatan dalam proyek ini</h3>
                              </ion-col>
                            </ion-row>
                          </ion-grid>
                        </ion-card-content>
                      </ion-card>
                    </ion-col>
                  </ion-row>
                </ng-template>

                <ng-template #kegiatan_ada>
                  <ion-row>
                    <ion-col size="12">
                      <ion-card color="primary" class="bayangan">
                        <ion-card-content>
                          <ion-grid fixed class="ion-no-padding">
                            <ion-row class="ion-text-center">
                              <ion-col size="12" class="putih">
                                <h2 class="bold">Kegiatan</h2>
                                  <h1 class="text_konten_banyak">Sudah selesai</h1>
                                  <h3>Kegiatan dalam proyek ini sudah selesai</h3>
                              </ion-col>
                            </ion-row>
                          </ion-grid>
                        </ion-card-content>
                      </ion-card>
                    </ion-col>
                  </ion-row>
                  
                  <ion-row>
                    <ion-col size="12" class="ion-padding-top ion-padding-bottom">
                      <ion-tab-button (click)="kegiatan(data.id, data.nama_proyek)">
                        <ion-icon size="large" name="newspaper-outline"></ion-icon>
                        <h2>Lihat kegiatan</h2>
                      </ion-tab-button>
                    </ion-col>
                  </ion-row>
                </ng-template>
              
              </ng-template>

              <ng-template #data_ada>
                <ion-row>
                  <!-- card masih proses -->
                  <ion-col size="6">
                    <ion-card class="kuning bayangan">
                      <ion-card-content>
                        <ion-grid fixed class="ion-no-padding">
                          <ion-row class="ion-text-center">
                            <ion-col size="12" class="hitam">
                              <h2 class="bold">Masih Proses</h2>
                                <h1 class="text_konten_banyak" *ngIf="data_masih_proses[data.id] !=0; else kosong1">{{ data_masih_proses[data.id] }}</h1>
                                <ng-template #kosong1>
                                  <h1 class="text_konten_banyak">0</h1>
                                </ng-template>
                                <h3>Kegiatan</h3>
                            </ion-col>
                          </ion-row>
                        </ion-grid>
                      </ion-card-content>
                    </ion-card>
                  </ion-col>
                  <!-- card proses selesai-->
                  <ion-col size="6">
                    <ion-card class="hijau bayangan">
                      <ion-card-content>
                        <ion-grid fixed class="ion-no-padding">
                          <ion-row class="ion-text-center">
                            <ion-col size="12" class="putih">
                              <h2 class="bold">Sudah Selesai</h2>
                                <h1 class="text_konten_banyak" *ngIf="data_sudah_komplit[data.id] != 0; else kosong2">{{ data_sudah_komplit[data.id] }}</h1>
                                <ng-template #kosong2>
                                  <h1 class="text_konten_banyak">0</h1>
                                </ng-template>
                                <h3>Kegiatan</h3>
                            </ion-col>
                          </ion-row>
                        </ion-grid>
                      </ion-card-content>
                    </ion-card>
                  </ion-col>
                </ion-row>
                
                <ion-row>
                  <ion-col size="12" class="ion-padding-top ion-padding-bottom">
                    <ion-tab-button (click)="kegiatan(data.id, data.nama_proyek)">
                      <ion-icon size="large" name="newspaper-outline"></ion-icon>
                      <h2>Lihat kegiatan</h2>
                    </ion-tab-button>
                  </ion-col>
                </ion-row>
              </ng-template>
            </ion-grid>
          </ion-card-content>
        </ion-card>
      </ion-col>

    </ion-row>

    <!-- data kosong -->
    <ng-template #data_beranda_tidak_ada>
      <ion-row class="ion-padding-top background_color_biru_gelap">
        <ion-col size="12" class="">
          <ion-card class="bayangan">
            <ion-card-header class="ion-text-center">
              <img class="image_size" src="assets/kosong.png" (error)="errorHandler($event)">
            </ion-card-header>
            <ion-card-content class="ion-no-padding">
              <ion-grid fixed class="ion-no-padding">
                <ion-row>
                  <ion-col size="12">
                    <ion-grid fixed>
                      <ion-row class="ion-text-center">
                        <ion-col size="12">
                          <h1 >Tidak ada proyek !</h1>
  
                        </ion-col>
                        <ion-col size="12">
                          <h2>Maaf, belum ada proyek yang anda pegang !</h2>
  
                        </ion-col>
                      </ion-row>
                    </ion-grid>
                  </ion-col>
                </ion-row>
              </ion-grid>
            </ion-card-content>
          </ion-card>
        </ion-col>
      </ion-row>
    </ng-template>

  </ion-grid>

  <!-- loading skeleton -->
  <ng-template #data_beranda_loading>
    <ion-grid fixed class="ion-no-padding"fixed>
      <ion-row class="ion-padding-top background_color_biru_gelap">
        <ion-col size="12" class="">
          <ion-card class="bayangan">
            <ion-card-header class="ion-padding-horizontal">
              <ion-skeleton-text animated style="width: 100%; height: 2rem;"></ion-skeleton-text>
            </ion-card-header>
            <ion-card-content class="ion-no-padding">
              <ion-grid fixed class="ion-no-padding">
                <ion-row>
                  <ion-col size="12">
                    <ion-list>
                      <ion-item>
                        <ion-skeleton-text animated style="width: 30%" ></ion-skeleton-text>
                      </ion-item>
                      <ion-item>
                        <ion-skeleton-text animated style="width: 30%" ></ion-skeleton-text>
                      </ion-item>
                      <ion-item>
                        <ion-skeleton-text animated style="width: 30%" ></ion-skeleton-text>
                      </ion-item>
                      <ion-item>
                        <ion-skeleton-text animated style="width: 30%" ></ion-skeleton-text>
                      </ion-item>
                      <ion-item>
                        <ion-skeleton-text animated style="width: 30%" ></ion-skeleton-text>
                      </ion-item>
                    </ion-list>
                  </ion-col>
                </ion-row>
                <ion-row>
                  <ion-col size="6" class="">
                    <ion-card>
                      <ion-card-content>
                        <ion-grid fixed class="ion-no-padding">
                          <ion-row class="ion-text-center">
                            <ion-col size="12" class="putih">
                              <ion-skeleton-text animated style="width: 100%" ></ion-skeleton-text>
                              <ion-skeleton-text animated style="width: 100%; height: 1.5rem;"></ion-skeleton-text>
                              <ion-skeleton-text animated style="width: 100%" ></ion-skeleton-text>
                            </ion-col>
                          </ion-row>
                        </ion-grid>
                      </ion-card-content>
                    </ion-card>
                  </ion-col>
  
                  <ion-col size="6" class="">
                    <ion-card>
                      <ion-card-content>
                        <ion-grid fixed class="ion-no-padding">
                          <ion-row class="ion-text-center">
                            <ion-col size="12" class="putih">
                              <ion-skeleton-text animated style="width: 100%" ></ion-skeleton-text>
                              <ion-skeleton-text animated style="width: 100%; height: 1.5rem;"></ion-skeleton-text>
                              <ion-skeleton-text animated style="width: 100%" ></ion-skeleton-text>
                            </ion-col>
                          </ion-row>
                        </ion-grid>
                      </ion-card-content>
                    </ion-card>
                  </ion-col>
                </ion-row>
                
              </ion-grid>
            </ion-card-content>
          </ion-card>
        </ion-col>
      </ion-row>
    </ion-grid>

  </ng-template>

</ion-content>
